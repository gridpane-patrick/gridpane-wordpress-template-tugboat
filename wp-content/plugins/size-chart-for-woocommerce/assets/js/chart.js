jQuery( function ( $ ) {	var table = $( '.kapsc_admin_chart_table' ),		total_rows = table.find( 'tr' ).length - 1,		total_coloums = table.find( 'th' ).length - 1,		hide_input = $( '#kapsc_hidden_tab_fld' ),		add_new_row = function () {			var add_row = '<tr>';			for ( var i = 0; i < total_coloums; i++ ) {				add_row += '<td><input class="kapsc_table_input" type="text" value=""/></td>';			}			add_row += '<td class="kapsc_buttons_in_row"><button type="button" class="kapsc_rem_row kapsc_rem_row_btn kapsc_button">-</button></td>';			add_row += '</tr>';			return add_row;		},		add_new_coloum = function ( cell_id ) {			var add_minus_btn = '<th><button type="button" class="kapsc_rem_col kapsc_rem_col_btn kapsc_button">-</button></th>',				add_input_in_col = '<td><input class="kapsc_table_input" type="text" /></td>';			table.find( 'thead tr' ).find( 'th:eq(' + cell_id + ')' ).after( add_minus_btn );			table.find( 'tbody tr' ).each( function () {				$( this ).find( 'td:eq(' + cell_id + ')' ).after( add_input_in_col );			} );		},		remove_new_col = function ( cell_id ) {			table.find( 'thead tr' ).find( 'th:eq(' + cell_id + ')' ).remove();			table.find( 'tbody tr' ).each( function () {				$( this ).find( 'td:eq(' + cell_id + ')' ).remove();			} );		},		table_box = function () {			var box_arr = [];			table.find( 'tbody tr' ).each( function () {				var coloums = [],					get_td = $( this ).find( 'td' );				get_td.each( function () {					if ( !$( this ).is( '.kapsc_buttons_in_row' ) ) {						var input_value = $( this ).find( 'input' ).val();						coloums.push( input_value );					}				} );				box_arr.push( coloums );			} );			hide_input.val( JSON.stringify( box_arr ) );		};	table		.on( 'click', '.kapsc_add_row', function () {			var this_cell = $( this ).closest( 'td' ),				this_row = this_cell.closest( 'tr' );			total_rows++;			this_row.after( add_new_row() );			table_box();		} )		.on( 'click', '.kapsc_rem_row', function () {			if ( total_rows < 2 ) {				return;			}			var this_cell = $( this ).closest( 'td' ),				this_row = this_cell.closest( 'tr' );			total_rows--;			this_row.remove();			table_box();		} )		.on( 'click', '.kapsc_add_col', function () {			var this_cell = $( this ).closest( 'th' ),				cell_id = this_cell.index();			total_coloums++;			add_new_coloum( cell_id );			table_box();		} )		.on( 'click', '.kapsc_rem_col', function () {			if ( total_coloums < 2 ) {				return;			}			var this_cell = $( this ).closest( 'th' ),				cell_id = this_cell.index();			total_coloums--;			remove_new_col( cell_id );			table_box();		} )		.on( 'keyup', 'input', function ( event ) {			var current_input = $( event.target ),				value = current_input.val();			if ( value.search( /<[^>]+>/ig ) >= 0 || value.search( '<>' ) >= 0 || value.search( '“' ) >= 0 ) {				current_input.val( value.replace( /<[^>]+>/ig, '' ).replace( '<>', '' ).replace( '“', '"' ) );			}			table_box();		} );} );