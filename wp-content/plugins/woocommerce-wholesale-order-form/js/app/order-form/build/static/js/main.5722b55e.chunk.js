(this["webpackJsonporder-form"]=this["webpackJsonporder-form"]||[]).push([[0],{193:function(t,e,a){t.exports=a(427)},279:function(t,e,a){},390:function(t,e,a){},427:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(4),o=a.n(i),s=a(29),c=a.n(s),l=a(179),u=a(37),d=a(45),p=a(17),h=a(18),f=a(20),g=a(19),m=a(21),v=a(432),y=function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(f.a)(this,Object(g.a)(e).call(this,t))).state={selectedCat:"Select Category"},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"onChange",value:function(t,e){var a=t||this.state.selectedCat;if(t){var n=this.props.categories;n.forEach((function(n,r){t!==n.name?n.children.length>0&&function e(n,r){n.children.forEach((function(n,i){t!==n.name?n.children.length>0&&e(n,r.children[i]):a=n.id}))}(n,e[r]):a=n.id})),this.setState({selectedCat:t}),this.props.onSelectChange(a)}else this.props.onSelectChange("Select Category")}},{key:"render",value:function(){var t=this,e=this.props,a=e.categories,n=e.appSettings,i=e.selectedCategory,o=[];a.forEach((function(t,e){o.push({title:t.name,value:t.name,key:t.id,children:[]}),t.children.length>0&&function t(e,a){e.children.forEach((function(e,n){a.children.push({title:e.name,value:e.name,key:e.id,children:[]}),e.children.length>0&&t(e,a.children[n])}))}(t,o[e])}));var s=i;if(void 0===s&&"none"!==n.wwof_general_default_product_category_search_filter){var c=a.find((function(t){return t.slug===n.wwof_general_default_product_category_search_filter}));c&&(s=c.name)}else s="Select Category"===s?"Select Category":this.state.selectedCat;return r.a.createElement(v.a,{showSearch:!0,allowClear:!0,style:{marginLeft:"10px"},className:"wwof-category-filter",value:s,treeData:o,placeholder:"Select Category",treeDefaultExpandAll:!0,onChange:function(e){return t.onChange(e,o)}})}}]),e}(r.a.Component),_=a(104),S=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.totalProducts,n=e.activePage,i=e.perPage;return r.a.createElement(_.a,{current:n,total:a,onChange:function(e){return t.props.activePageUpdate(e)},pageSize:i,style:{marginTop:"10px"}})}}]),e}(r.a.Component),b=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"setSKUColumn",value:function(t,e,a){if("simple"===t.type||"variation"===t.type)return t.sku;if("variable"===t.type){var n=e.find((function(e){return t.id===e.product_id})),r=[];if(n&&(r=a[t.id].find((function(t){return t.id===n.variation_id}))),r&&"undefined"!==typeof r.sku)return r.sku;if("undefined"!==typeof t.sku)return t.sku}}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.selectedVariations,n=t.variations;return r.a.createElement("div",null,this.setSKUColumn(e,a,n))}}]),e}(r.a.Component),w=a(428),E=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"displayPopup",value:function(){return"yes"===this.props.appSettings.wwof_general_display_product_details_on_popup}},{key:"productImage",value:function(t,e){var a=this,n=Options.site_url+"/wp-content/uploads/woocommerce-placeholder-300x300.png",i=this.props.appSettings.wwof_general_product_thumbnail_image_size,o=t.images;return this.displayPopup()?"undefined"!==typeof o[0]?r.a.createElement("a",{href:"/#",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),a.props.displayModal(t)}},r.a.createElement(w.a,{src:o[0].src,shape:"square",style:{width:i.width+"px",height:i.height+"px"}})):r.a.createElement("a",{href:"/#",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),a.props.displayModal(t)}},r.a.createElement(w.a,{src:n,shape:"square",style:{width:i.width+"px",height:i.height+"px"}})):"undefined"!==typeof o[0]?r.a.createElement("a",{href:t.permalink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(w.a,{src:o[0].src,shape:"square",style:{width:i.width+"px",height:i.height+"px"}})):r.a.createElement("a",{href:t.permalink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(w.a,{src:n,shape:"square",style:{width:i.width+"px",height:i.height+"px"}}))}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.appSettings;return r.a.createElement("div",null,this.productImage(e,a))}}]),e}(r.a.Component),k=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"setPriceColumn",value:function(t,e,a){if("simple"===t.type||"variation"===t.type)return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.price_html}});if("variable"===t.type){var n=e.find((function(e){return t.id===e.product_id})),i=[];return n&&(i=a[t.id].find((function(t){return t.id===n.variation_id}))),i&&void 0!==i.price?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:i.price}}):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.price_html}})}}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.selectedVariations,n=t.variations;return r.a.createElement("div",null,this.setPriceColumn(e,a,n))}}]),e}(r.a.Component),O=a(5),x=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"setInstockColumn",value:function(t,e,a){if("simple"===t.type||"variation"===t.type)return null!==t.stock_quantity?r.a.createElement("p",null,r.a.createElement(O.a,{type:"inbox",style:{fontSize:"20px",color:"#08c",marginRight:"10px"}}),t.stock_quantity):"";if("variable"===t.type){var n=e.find((function(e){return t.id===e.product_id})),i=[];return n&&(i=a[t.id].find((function(t){return t.id===n.variation_id}))),i&&void 0!==i.stock_quantity&&null!==i.stock_quantity?r.a.createElement("p",null,r.a.createElement(O.a,{type:"inbox",style:{fontSize:"20px",color:"#08c",marginRight:"10px"}}),i.stock_quantity):null!==t.stock_quantity?r.a.createElement("p",null,r.a.createElement(O.a,{type:"inbox",style:{fontSize:"20px",color:"#08c",marginRight:"10px"}}),t.stock_quantity):""}}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.selectedVariations,n=t.variations;return r.a.createElement("div",null,this.setInstockColumn(e,a,n))}}]),e}(r.a.Component),C=a(436),j=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=this.props.product;return r.a.createElement("div",null,r.a.createElement(C.a,{min:1,defaultValue:1,onChange:function(a){return t.props.updateQuantityState(e,a)}}))}}]),e}(r.a.Component),P=a(78),I=a(102),T=a(429),L=a(430),V=a(35),q=a.n(V),A=P.a.Option,D=function(t){function e(t){var n;return Object(p.a)(this,e),(n=Object(f.a)(this,Object(g.a)(e).call(this,t))).highlightSearchedString=function(t){var e=t.name+": "+t.option+" ",a=n.state.searchString;if(a){var i=e.toLowerCase().indexOf(a.toLowerCase());if(-1!==i){var o=a.length,s=e.substring(0,i),c=e.substring(i+o),l=e.substring(i,i+o);return r.a.createElement("span",null,s,r.a.createElement("span",{className:"searchString"},l),c)}}return r.a.createElement("span",null,e)},n.variationLoadMoreOnScroll=function(){var t=Object(d.a)(c.a.mark((function t(e,i){var s,l,d,p,h,f,g,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.persist(),s=e.target,"variable"!==i.type||!n.props.variations){t.next=13;break}if(!1!==n.state.variationLazyLoad||s.scrollTop+s.offsetHeight!==s.scrollHeight){t.next=13;break}return n.setState({variationLazyLoad:!0}),l=n.state.variationsPerPage,d=l.findIndex((function(t){return i.id===t.productID})),(0===l.length||l.length>0&&l[d].page<l[d].total_pages)&&s.getElementsByClassName("loadmore").length<=0&&(p=document.createElement("li"),o.a.render(r.a.createElement("span",{style:{padding:"10px"}},r.a.createElement(O.a,{type:"loading"})," Loading more variations"),p),p.setAttribute("class","loadmore"),s.appendChild(p)),h=a(49),t.next=11,q.a.post(Options.ajax,h.stringify({action:"wwof_api_get_variations",product_id:i.id,page:d>=0?l[d].page+1:2,search:n.state.searchString}));case 11:if("success"===(f=t.sent).data.status&&0!==f.data.variations.length){for(g=s.getElementsByClassName("loadmore");g.length>0;)g[0].remove();(m=n.props.variations)[i.id]=[].concat(Object(u.a)(m[i.id]),Object(u.a)(f.data.variations[i.id])),d>=0?l[d]={productID:i.id,page:l[d].page+1,total_pages:f.data.total_pages,total_variations:f.data.total_variations}:l.push({productID:i.id,page:2,total_pages:f.data.total_pages,total_variations:f.data.total_variations}),n.setState({variationsPerPage:l}),n.props.handleAppStateUpdate({variations:m},(function(){n.setState({variationLazyLoad:!1})}))}case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.handleSearch=function(){var t=Object(d.a)(c.a.mark((function t(e,r){var i,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({searchString:e,fetching:!0,typingTimeout:setTimeout(Object(d.a)(c.a.mark((function t(){var i,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a(49),t.next=3,q.a.post(Options.ajax,i.stringify({action:"wwof_api_get_variations",product_id:r.id,search:e,page:1}));case 3:"success"===(o=t.sent).data.status?(n.setState({fetching:!1,variationsPerPage:[],variationLazyLoad:!1}),s=n.props.variations,0!==o.data.variations.length?s[r.id]=Object(u.a)(o.data.variations[r.id]):s[r.id]=[],n.props.handleAppStateUpdate({variations:s},(function(){}))):n.props.handleAppStateUpdate({variations:[]},(function(){}));case 5:case"end":return t.stop()}}),t)}))),500)}),t.next=12;break;case 6:return n.setState({searchString:"",variationsPerPage:[],variationLazyLoad:!1}),i=a(49),t.next=10,q.a.post(Options.ajax,i.stringify({action:"wwof_api_get_variations",product_id:r.id,page:1}));case 10:"success"===(o=t.sent).data.status&&(s=n.props.variations,0!==o.data.variations.length&&(s[r.id]=Object(u.a)(o.data.variations[r.id])),n.props.handleAppStateUpdate({variations:s},(function(){})));case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.isSearching=function(t){return n.state.fetching?r.a.createElement("div",{style:{padding:10}},r.a.createElement(I.a,{size:"small"})," Searching"):t},n.state={variationsPerPage:[],variationLazyLoad:!1,fetching:!1,typingTimeout:0,searchString:""},n}return Object(m.a)(e,t),Object(h.a)(e,[{key:"displayPopup",value:function(){return"yes"===this.props.appSettings.wwof_general_display_product_details_on_popup}},{key:"setProductColumn",value:function(t){var e=this;return r.a.createElement("div",null,r.a.createElement(T.a,null,r.a.createElement(L.a,{xs:24,sm:24,md:24,lg:24,xl:24},this.displayPopup()?r.a.createElement("a",{href:"/#",rel:"noopener noreferrer",onClick:function(a){a.preventDefault(),e.props.displayModal(t)}},t.name):r.a.createElement("a",{href:t.permalink,target:"_blank",rel:"noopener noreferrer"},t.name),this.displayVariations(t))))}},{key:"displayVariations",value:function(t){var e=this;if("variable"===t.type&&this.props.variations&&this.props.variations[t.id]){var a=this.props.variations[t.id].map((function(t){var a=t.attributes.map((function(t){return r.a.createElement("span",{key:t.id},e.highlightSearchedString(t))}));return r.a.createElement(A,{key:t.id,value:t.id},a)})),n=this.props.selectedVariations.find((function(e){return t.id===e.product_id})),i="Select Variation";return n&&(i=n.variation_id),r.a.createElement("div",null,r.a.createElement(P.a,{showSearch:!0,placeholder:"Select Variation",value:i,style:{width:250,marginTop:10},onChange:function(a){return e.props.updateselectedVariationsState(t,a)},onPopupScroll:function(a){return e.variationLoadMoreOnScroll(a,t)},filterOption:!1,onSearch:function(a){return e.handleSearch(a,t)},notFoundContent:"No results found",dropdownRender:function(t){return e.isSearching(t)},onSelect:function(){return e.setState({searchString:""})},allowClear:!0},a))}}},{key:"render",value:function(){var t=this.props.product;return r.a.createElement("div",null,this.setProductColumn(t))}}]),e}(r.a.Component),M=a(435),U=a(40),z=P.a.Option,H=function(t){function e(t){var n;return Object(p.a)(this,e),(n=Object(f.a)(this,Object(g.a)(e).call(this,t))).highlightSearchedString=function(t){var e=t.name+": "+t.option+" ",a=n.state.searchString;if(a){var i=e.toLowerCase().indexOf(a.toLowerCase());if(-1!==i){var o=a.length,s=e.substring(0,i),c=e.substring(i+o),l=e.substring(i,i+o);return r.a.createElement("span",null,s,r.a.createElement("span",{className:"searchString"},l),c)}}return r.a.createElement("span",null,e)},n.variationLoadMoreOnScroll=function(){var t=Object(d.a)(c.a.mark((function t(e,i){var s,l,d,p,h,f,g,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.persist(),s=e.target,"variable"!==i.type||!n.props.variations){t.next=13;break}if(!1!==n.state.variationLazyLoad||s.scrollTop+s.offsetHeight!==s.scrollHeight){t.next=13;break}return n.setState({variationLazyLoad:!0}),l=n.state.variationsPerPage,d=l.findIndex((function(t){return i.id===t.productID})),(0===l.length||l.length>0&&l[d].page<l[d].total_pages)&&s.getElementsByClassName("loadmore").length<=0&&(p=document.createElement("li"),o.a.render(r.a.createElement("span",{style:{padding:"10px"}},r.a.createElement(O.a,{type:"loading"})," Loading more variations"),p),p.setAttribute("class","loadmore"),s.appendChild(p)),h=a(49),t.next=11,q.a.post(Options.ajax,h.stringify({action:"wwof_api_get_variations",product_id:i.id,page:d>=0?l[d].page+1:2,search:n.state.searchString}));case 11:if("success"===(f=t.sent).data.status&&0!==f.data.variations.length){for(g=s.getElementsByClassName("loadmore");g.length>0;)g[0].remove();(m=n.props.variations)[i.id]=[].concat(Object(u.a)(m[i.id]),Object(u.a)(f.data.variations[i.id])),d>=0?l[d]={productID:i.id,page:l[d].page+1,total_pages:f.data.total_pages,total_variations:f.data.total_variations}:l.push({productID:i.id,page:2,total_pages:f.data.total_pages,total_variations:f.data.total_variations}),n.setState({variationsPerPage:l}),n.props.handleAppStateUpdate({variations:m},(function(){n.setState({variationLazyLoad:!1})}))}case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.handleSearch=function(){var t=Object(d.a)(c.a.mark((function t(e,r){var i,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({searchString:e,fetching:!0,typingTimeout:setTimeout(Object(d.a)(c.a.mark((function t(){var i,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a(49),t.next=3,q.a.post(Options.ajax,i.stringify({action:"wwof_api_get_variations",product_id:r.id,search:e,page:1}));case 3:"success"===(o=t.sent).data.status?(n.setState({fetching:!1,variationsPerPage:[],variationLazyLoad:!1}),s=n.props.variations,0!==o.data.variations.length?s[r.id]=Object(u.a)(o.data.variations[r.id]):s[r.id]=[],n.props.handleAppStateUpdate({variations:s},(function(){}))):n.props.handleAppStateUpdate({variations:[]},(function(){}));case 5:case"end":return t.stop()}}),t)}))),500)}),t.next=12;break;case 6:return n.setState({searchString:"",variationsPerPage:[],variationLazyLoad:!1}),i=a(49),t.next=10,q.a.post(Options.ajax,i.stringify({action:"wwof_api_get_variations",product_id:r.id,page:1}));case 10:"success"===(o=t.sent).data.status&&(s=n.props.variations,0!==o.data.variations.length&&(s[r.id]=Object(u.a)(o.data.variations[r.id])),n.props.handleAppStateUpdate({variations:s},(function(){})));case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.isSearching=function(t){return n.state.fetching?r.a.createElement("div",{style:{padding:10}},r.a.createElement(I.a,{size:"small"})," Searching"):t},n.state={variationsPerPage:[],variationLazyLoad:!1,fetching:!1,typingTimeout:0,searchString:""},n}return Object(m.a)(e,t),Object(h.a)(e,[{key:"displayVariations",value:function(t){var e=this;if("variable"===t.type&&this.props.variations&&this.props.variations[t.id]){var a=this.props.variations[t.id].map((function(t){var a=t.attributes.map((function(t){return r.a.createElement("span",{key:t.id},e.highlightSearchedString(t))}));return r.a.createElement(z,{key:t.id,value:t.id},a)})),n=this.props.selectedVariations.find((function(e){return t.id===e.product_id})),i="Select Variation";return n&&(i=n.variation_id),r.a.createElement("div",null,r.a.createElement(P.a,{showSearch:!0,placeholder:"Select Variation",value:i,style:{width:250,marginTop:10},onChange:function(a){return e.props.updateselectedVariationsState(t,a)},onPopupScroll:function(a){return e.variationLoadMoreOnScroll(a,t)},filterOption:!1,onSearch:function(a){return e.handleSearch(a,t)},notFoundContent:"No results found",dropdownRender:function(t){return e.isSearching(t)},onSelect:function(){return e.setState({searchString:""})},allowClear:!0},a))}}},{key:"productModal",value:function(){var t=this,e=Options.site_url+"/wp-content/uploads/woocommerce-placeholder-300x300.png",a=this.props.openedProduct,n=this.props.appSettings.wwof_general_show_product_stock_quantity,i=[],o=this.props.selectedVariations.find((function(t){return a.id===t.product_id}));if(o&&(i=this.props.variations[a.id].find((function(t){return t.id===o.variation_id}))),a&&!0===this.props.showModal)return r.a.createElement(M.a,{title:"",visible:this.props.showModal,onCancel:function(){t.props.onCancel()},width:"650px",footer:null},r.a.createElement(T.a,null,r.a.createElement(L.a,{xs:12,sm:12,md:12,lg:12,xl:12},"undefined"!==typeof a.images[0]?r.a.createElement(w.a,{src:a.images[0].src,shape:"square",size:200}):r.a.createElement(w.a,{src:e,shape:"square",size:200})),r.a.createElement(L.a,{xs:12,sm:12,md:12,lg:12,xl:12},r.a.createElement("h2",null,a.name),r.a.createElement("p",{style:{fontSize:"16px"},dangerouslySetInnerHTML:{__html:a.price_html}}),r.a.createElement("p",{style:{fontSize:"16px"},dangerouslySetInnerHTML:{__html:a.short_description}}),r.a.createElement("p",{style:{fontSize:"16px"},dangerouslySetInnerHTML:{__html:a.description}}),r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:"10px"}},this.displayVariations(a)),i&&i.description?r.a.createElement("div",{style:{marginBottom:"10px"}},r.a.createElement("p",{style:{fontSize:"16px"},dangerouslySetInnerHTML:{__html:i.description}})):"",i&&i.price?r.a.createElement("div",{style:{marginBottom:"10px"}},r.a.createElement("p",{style:{fontSize:"16px"},dangerouslySetInnerHTML:{__html:i.price}})):"","yes"===n&&"variable"===a.type&&i&&null!=i.stock_quantity&&i.stock_quantity>=0?r.a.createElement("div",{style:{marginBottom:"10px"}},r.a.createElement(O.a,{type:"inbox",style:{fontSize:"22px",color:"#08c",marginRight:"10px"}}),i.stock_quantity):"","yes"===n&&("simple"===a.type||"variation"===a.type)&&null!=a.stock_quantity&&a.stock_quantity>=0?r.a.createElement("div",{style:{marginBottom:"10px"}},r.a.createElement(O.a,{type:"inbox",style:{fontSize:"22px",color:"#08c",marginRight:"10px"}}),a.stock_quantity):"",r.a.createElement("div",{style:{marginBottom:"10px"}},0===a.stock_quantity||i&&0===i.stock_quantity?r.a.createElement("div",null,r.a.createElement("p",{className:"outofstock"},"Out of Stock"),r.a.createElement(C.a,{min:1,defaultValue:1,style:{marginRight:"10px"}}),r.a.createElement(U.a,{type:"primary",disabled:!0},"Add To Cart")):r.a.createElement("div",null,r.a.createElement(C.a,{min:1,defaultValue:1,onChange:function(e){return t.props.updateQuantityState(a,e)},style:{marginRight:"10px"}}),r.a.createElement(U.a,{type:"primary",onClick:function(e){return t.props.addProductToCart(a)}},"Add To Cart")))))))}},{key:"render",value:function(){return r.a.createElement("div",null,this.productModal())}}]),e}(r.a.Component),R=a(437),N=a(438),B=a(431),F=(a(279),function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(f.a)(this,Object(g.a)(e).call(this,t))).state={quantity:[],selectedProducts:[],selectedVariations:[],columns:[{title:"Product",dataIndex:"product",key:"product",sorter:!0},{title:"Price",dataIndex:"price",key:"price"},{title:"Quantity",dataIndex:"quantity",key:"quantity"}],showModal:!1,openedProduct:""},a}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidUpdate",value:function(){this.showSKU(),this.showInStockColumn(),this.showAddToCartPerRow(),this.showThumbnail()}},{key:"displayModal",value:function(t){this.setState({showModal:!0,openedProduct:t})}},{key:"updateQuantityState",value:function(t,e){var a=this.state.quantity,n=a.findIndex((function(e){return t.id===e.product_id}));n<0?a.push({product_id:t.id,quantity:e}):a[n]={product_id:t.id,quantity:e},this.setState({quantity:a});var r=this.state.selectedProducts,i=r.findIndex((function(e){return t.id===e.productID}));i>=0&&(r[i]={productTitle:r[i].productTitle,productType:r[i].productType,productID:r[i].productID,variationID:r[i].variationID,quantity:e}),this.setState({selectedProducts:r})}},{key:"updateselectedVariationsState",value:function(t,e){var a=this.state.selectedVariations;if(e){var n=a.findIndex((function(e){return t.id===e.product_id})),r=this.props.variations[t.id].find((function(t){return t.id===e})).attributes.map((function(t){return t.name+" : "+t.option}));n<0?a.push({product_id:t.id,variation_id:e,name:r.join("<br/>")}):a[n]={product_id:t.id,variation_id:e,name:r.join("<br/>")},this.setState({selectedVariations:a});var i=this.state.selectedProducts,o=i.findIndex((function(e){return t.id===e.productID}));o>=0&&(i[o]={productTitle:i[o].productTitle,productType:i[o].productType,productID:i[o].productID,variationID:e,quantity:i[o].quantity}),this.setState({selectedProducts:i})}else{var s=a.findIndex((function(e){return t.id===e.product_id}));-1!==s&&(a.splice(s,1),this.setState({selectedVariations:a}));var c=this.state.selectedProducts,l=c.findIndex((function(e){return t.id===e.productID}));l>=0&&(c[l]={productTitle:c[l].productTitle,productType:c[l].productType,productID:c[l].productID,variationID:e,quantity:c[l].quantity})}}},{key:"showThumbnail",value:function(){var t=this.props.appSettings.wwof_general_show_product_thumbnail,e=this.state.columns,a=e.find((function(t){return"thumbnail"===t.key}));"yes"===t&&"undefined"===typeof a&&(e.splice(1,0,{title:"",dataIndex:"thumbnail",key:"thumbnail"}),this.setState({columns:e}))}},{key:"showSKU",value:function(){var t=this.props.appSettings.wwof_general_show_product_sku,e=this.state.columns,a=e.find((function(t){return"sku"===t.key}));"yes"===t&&"undefined"===typeof a&&(e.splice(0,0,{title:"SKU",dataIndex:"sku",key:"sku"}),this.setState({columns:e}))}},{key:"showInStockColumn",value:function(){var t=this.props.appSettings.wwof_general_show_product_stock_quantity,e=this.state.columns,a=e.find((function(t){return"in_stock"===t.key}));"yes"===t&&"undefined"===typeof a&&(e.splice(3,0,{title:"In Stock",dataIndex:"in_stock",key:"in_stock"}),this.setState({columns:e}))}},{key:"handleSorting",value:function(t,e,a){var n=this,r="ascend"===a.order?"asc":"desc",i="product"===a.field?"title":"";this.props.handleAppStateUpdate({fetching:!0,total_products:0,sort_order:r,sort_by:i,active_page:1},(function(){return n.props.fetchProducts()}))}},{key:"showAddToCartPerRow",value:function(){var t=this,e=this.props.appSettings.wwof_general_use_alternate_view_of_wholesale_page,a=this.state.columns,n={title:"",key:"action",render:function(e){var a=e.product_data,n=t.state.selectedVariations.find((function(t){return a.id===t.product_id})),i=[];return n&&(i=t.props.variations[a.id].find((function(t){return t.id===n.variation_id}))),0===a.stock_quantity||0===i.stock_quantity?r.a.createElement("p",{className:"outofstock"},"Out of Stock"):r.a.createElement(U.a,{type:"primary",onClick:function(a){return t.addProductToCart(e)}},"Add To Cart")}},i=a.find((function(t){return"action"===t.key}));"no"===e&&"undefined"===typeof i&&(a.splice(5,0,n),this.setState({columns:a}))}},{key:"addProductToCart",value:function(t){var e=this,n=t.hasOwnProperty("product_data")?t.product_data:t,i=this.state.quantity.find((function(t){return t.product_id===n.id}));i=void 0!==i?i.quantity:1;var o=this.state.selectedVariations.find((function(t){return t.product_id===n.id})),s="";"variable"===n.type&&void 0!==o&&(s=o.name);var c=a(49);q.a.post(Options.ajax,c.stringify({action:"wwof_add_product_to_cart",product_type:n.type,product_id:n.id,variation_id:void 0!==o?o.variation_id:0,quantity:i})).then((function(t){if("success"===t.data.status){R.a.success({message:"Succesfully Added:",description:r.a.createElement("div",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<b>"+n.name+"</b> x "+i+"<br/>"+s}}),r.a.createElement("a",{href:e.props.cartURL},r.a.createElement(U.a,{style:{marginTop:"10px"}},"View Cart",r.a.createElement(O.a,{type:"shopping-cart"})))),duration:10});var a=t.data.fragments,o=t.data.cart_hash,c=new CustomEvent("added_to_cart",{detail:{fragments:a,cart_hash:o}});document.body.dispatchEvent(c),e.props.handleAppStateUpdate({subtotal:t.data.cart_subtotal_markup},(function(){}))}else"failed"===t.data.status&&R.a.error({message:"Add to Cart Failed:",description:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.data.error_message}}),duration:10})})).catch((function(t){R.a.error({message:"Add to Cart",description:"Add to cart failed.",duration:10})}))}},{key:"addProductsToCart",value:function(){var t=this,e=this.state.selectedProducts,n=a(49);q.a.post(Options.ajax,n.stringify({action:"wwof_add_products_to_cart",products:e})).then((function(a){if("success"===a.data.status){var n=[],i=a.data.successfully_added;Object.keys(i).forEach((function(a){var o=e.find((function(t){return parseInt(t.productID)===parseInt(a)||parseInt(t.variationID)===parseInt(a)}));if(o)if(["simple","variation"].includes(o.productType))n.push(r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<b>"+o.productTitle+"</b> x "+i[a]}}));else if("variable"===o.productType){var s=t.state.selectedVariations.findIndex((function(t){return parseInt(a)===parseInt(t.variation_id)}));-1!==s&&n.push(r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<b>"+o.productTitle+"</b> x "+i[a]+"<br/>"+t.state.selectedVariations[s].name}}))}}));var o=[];a.data.failed_to_add.forEach((function(t,a){var n=e.find((function(e){return parseInt(e.productID)===parseInt(t.product_id)}));n&&o.push(r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<b>"+n.productTitle+"</b> x "+t.quantity+"<br/>"+t.error_message}}))})),n.length>0&&R.a.success({message:"Succesfully Added:",description:r.a.createElement("div",null,r.a.createElement(N.a,{size:"small",bordered:!0,dataSource:n,renderItem:function(t){return r.a.createElement(N.a.Item,null,t)}}),r.a.createElement("a",{href:t.props.cartURL},r.a.createElement(U.a,{style:{marginTop:"10px"}},"View Cart",r.a.createElement(O.a,{type:"shopping-cart"})))),duration:10}),o.length>0&&R.a.error({message:"Add to Cart Failed:",description:r.a.createElement(N.a,{size:"small",bordered:!0,dataSource:o,renderItem:function(t){return r.a.createElement(N.a.Item,null,t)}}),duration:10});var s=a.data.fragments,c=a.data.cart_hash,l=new CustomEvent("added_to_cart",{detail:{fragments:s,cart_hash:c}});document.body.dispatchEvent(l),t.props.handleAppStateUpdate({subtotal:a.data.cart_subtotal_markup},(function(){}))}else R.a.error({message:"Add to Cart Failed:",description:"error"})})).catch((function(t){console.log(t),R.a.error({message:"Add to Cart Failed",description:"error"})}))}},{key:"insertFooter",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(I.a,{tip:"Loading "+this.props.products.length+" out of "+this.props.totalProducts+" products"}))}},{key:"render",value:function(){var t=this,e=this.props,a=e.products,n=e.appSettings,i=e.fetching,o=n.wwof_general_use_alternate_view_of_wholesale_page,s=n.wwof_general_disable_pagination,c=a.length>0?a.map((function(e){return{key:e.id,product_data:e,product:r.a.createElement(D,{product:e,appSettings:t.props.appSettings,displayModal:t.displayModal.bind(t),selectedVariations:t.state.selectedVariations,variations:t.props.variations,updateselectedVariationsState:t.updateselectedVariationsState.bind(t),handleAppStateUpdate:t.props.handleAppStateUpdate}),sku:r.a.createElement(b,{product:e,selectedVariations:t.state.selectedVariations,variations:t.props.variations}),thumbnail:r.a.createElement(E,{product:e,appSettings:t.props.appSettings,displayModal:t.displayModal.bind(t)}),price:r.a.createElement(k,{product:e,selectedVariations:t.state.selectedVariations,variations:t.props.variations}),in_stock:r.a.createElement(x,{product:e,selectedVariations:t.state.selectedVariations,variations:t.props.variations}),quantity:r.a.createElement(j,{product:e,updateQuantityState:t.updateQuantityState.bind(t)})}})):[],l={onChange:function(e,a){var n=0===e.length?[]:t.state.selectedProducts;n.forEach((function(t,a){!1===e.includes(t.productID)&&n.splice(a,1)})),e.forEach((function(e,r){var i=a.find((function(t){return t.key===e})),o=t.state.quantity.find((function(t){return t.product_id===e})),s=t.state.selectedVariations.find((function(t){return t.product_id===e}));i&&(void 0===n.find((function(t){return t.productID===e}))&&n.push({productTitle:i.product_data.name,productType:i.product_data.type,productID:e,variationID:void 0!==s?s.variation_id:0,quantity:void 0!==o?o.quantity:1}))})),t.setState({selectedProducts:n})}},u="";"yes"===o&&(u=this.state.selectedProducts.length>0?r.a.createElement(U.a,{type:"primary",onClick:this.addProductsToCart.bind(this)},"Add Selected Products To Cart"):r.a.createElement(U.a,{type:"primary",disabled:!0},"Add Selected Products To Cart"));var d={dataSource:c,columns:this.state.columns,loading:i,pagination:!1,style:{marginTop:"10px"},onChange:this.handleSorting.bind(this)};return"yes"===o&&(d.rowSelection=l),"yes"===s&&this.props.products.length<this.props.totalProducts&&(d.footer=this.insertFooter.bind(this)),r.a.createElement("div",null,r.a.createElement("div",null,u),r.a.createElement(H,{openedProduct:this.state.openedProduct,appSettings:this.props.appSettings,selectedVariations:this.state.selectedVariations,variations:this.props.variations,showModal:this.state.showModal,updateselectedVariationsState:this.updateselectedVariationsState.bind(this),handleAppStateUpdate:this.props.handleAppStateUpdate,onCancel:function(){t.setState({showModal:!1})},updateQuantityState:this.updateQuantityState,addProductToCart:this.addProductToCart.bind(this)}),r.a.createElement(B.a,Object.assign({id:"wwof-order-form"},d)),r.a.createElement("div",null,u))}}]),e}(r.a.Component)),Q=a(434),K=function(t){function e(){return Object(p.a)(this,e),Object(f.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(Q.a,{placeholder:"Search Products",onChange:function(e){return t.props.onInputChange(e.target.value)},value:this.props.inputValue})}}]),e}(r.a.Component),J=a(439),W=a(433);a(356),a(94),a(360),a(361),a(362),a(374),a(376),a(378),a(380),a(382),a(384),a(131),a(386),a(388),a(390);function G(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function X(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?G(a,!0).forEach((function(e){Object(l.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Y=function(t){function e(t){var n;return Object(p.a)(this,e),(n=Object(f.a)(this,Object(g.a)(e).call(this,t))).loadOnScroll=function(t){if("yes"===("undefined"!==typeof n.state.wwof_settings.wwof_general_disable_pagination?n.state.wwof_settings.wwof_general_disable_pagination:"no")&&!n.state.loading_more&&n.state.active_page<n.state.total_page){var e=document.getElementById("wwof-order-form").getBoundingClientRect();e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)&&n.setState({active_page:n.state.active_page+1,loading_more:!0},(function(){n.fetchProducts("",(function(){return n.loadOnScroll(null)}))}))}},n.fetchProducts=function(){var t=Object(d.a)(c.a.mark((function t(e,r){var i,o,s,l,d,p,h,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.props.attributes,o=a(49),t.next=4,q.a.post(Options.ajax,o.stringify({action:"wwof_api_get_products",search:n.state.search,category:n.state.category_filter,page:n.state.active_page,searching:e||"no",sort_order:n.state.sort_order,products:i.products,categories:i.categories,show_all:n.state.show_all}));case 4:"success"===(s=t.sent).data.status?(l="","yes"!==e&&"Select Category"!==n.state.category_filter&&n.state.categories&&"none"!==s.data.settings.wwof_general_default_product_category_search_filter?(d=n.state.categories.find((function(t){return t.slug===s.data.settings.wwof_general_default_product_category_search_filter})))&&(l=d.id):l=n.state.category_filter,n.setState({wwof_settings:s.data.settings,per_page:parseInt(s.data.settings.wwof_general_products_per_page)||12,total_page:parseInt(s.data.total_page),total_products:parseInt(s.data.total_products),fetching:!1,subtotal:s.data.cart_subtotal,cart_url:s.data.cart_url,loading_more:!1,category_filter:l||"Select Category"}),"yes"===s.data.settings.wwof_general_disable_pagination&&n.state.active_page>1?(p=[].concat(Object(u.a)(n.state.products),Object(u.a)(s.data.products)),h=X({},n.state.variations,{},s.data.variations),n.setState({products:p,variations:h})):n.setState({products:s.data.products,variations:s.data.variations}),"function"===typeof r&&r()):(f=s.data.message,n.setState({fetch_error_msg:f}),n.setState({fetching:!1}));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),n.fetchCategories=Object(d.a)(c.a.mark((function t(){var e,r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a(49),r=n.props.attributes,t.next=4,q.a.post(Options.ajax,e.stringify({action:"wwof_api_get_categories",categories:r.categories}));case 4:"success"===(i=t.sent).data.status?n.setState({categories:i.data.categories}):console.log(i.data.message);case 6:case"end":return t.stop()}}),t)}))),n.state={products:[],categories:[],variations:[],search:"",category_filter:void 0,active_page:1,per_page:12,total_products:0,total_page:0,fetching:!0,wwof_settings:[],wholesale_role:"wholesale_customer",subtotal:"",sort_order:"",cart_url:"",loading_more:!1,show_all:!1,fetch_error_msg:""},n}return Object(m.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.fetchProducts("",(function(){t.loadOnScroll(null),window.addEventListener("scroll",t.loadOnScroll)})),this.fetchCategories()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.loadOnScroll)}},{key:"onFormSubmit",value:function(t){var e=this;t.preventDefault(),this.setState({fetching:!0,total_products:0,show_all:!1,active_page:1},(function(){e.fetchProducts("yes")}))}},{key:"showAll",value:function(t){var e=this;t.preventDefault(),this.setState({search:"",category_filter:"Select Category",active_page:1,fetching:!0,show_all:!0},(function(){e.fetchProducts()}))}},{key:"activePageUpdate",value:function(t){var e=this;this.setState({active_page:t,fetching:!0},(function(){e.fetchProducts()}))}},{key:"handleAppStateUpdate",value:function(t,e){this.setState(t,(function(){return e()}))}},{key:"render",value:function(){var t=this,e=this.props.attributes,a={products:this.state.products,variations:this.state.variations,appSettings:this.state.wwof_settings,wholesaleRole:this.state.wholesale_role,activePage:this.state.active_page,totalPage:this.state.total_page,fetchProducts:this.fetchProducts,handleAppStateUpdate:this.handleAppStateUpdate.bind(this),totalProducts:this.state.total_products,fetching:this.state.fetching,cartURL:this.state.cart_url};return r.a.createElement("div",null,this.state.fetch_error_msg?r.a.createElement("div",{className:"wwof-alert-message"},r.a.createElement(J.a,{message:"Error",description:this.state.fetch_error_msg,type:"error",closable:!0})):"",e.show_search>=1?r.a.createElement(W.a,{onSubmit:function(e){return t.onFormSubmit(e)}},r.a.createElement(T.a,null,r.a.createElement(L.a,{md:24,lg:8,xl:8},r.a.createElement(K,{onInputChange:function(e){return t.setState({search:e})},inputValue:this.state.search})),r.a.createElement(L.a,{md:24,lg:8,xl:8},r.a.createElement(y,{selectedCategory:this.state.category_filter,categories:this.state.categories,onSelectChange:function(e){return t.setState({category_filter:e,show_all:!0})},appSettings:this.state.wwof_settings})),r.a.createElement(L.a,{md:24,lg:8,xl:8},r.a.createElement(U.a,{type:"primary",onClick:function(e){return t.onFormSubmit(e)},style:{marginLeft:"20px"},className:"wwof-search-btn"},"Search"),r.a.createElement(U.a,{type:"primary",onClick:function(e){return t.showAll(e)},style:{marginLeft:"10px"},className:"wwof-show-all-btn"},"Show All Products")))):"",r.a.createElement(F,a),"yes"!==this.state.wwof_settings.wwof_general_disable_pagination?r.a.createElement(S,{totalProducts:this.state.total_products,activePage:this.state.active_page,totalPage:this.state.total_page,perPage:this.state.per_page,activePageUpdate:function(e){return t.activePageUpdate(e)}}):"","yes"===this.state.wwof_settings.wwof_general_display_cart_subtotal&&this.state.subtotal?r.a.createElement(T.a,null,r.a.createElement(L.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.subtotal}}))):"",r.a.createElement(T.a,null,r.a.createElement(L.a,null,r.a.createElement("p",null,this.state.total_products," Product(s) Found"))))}}]),e}(r.a.Component);document.querySelectorAll(".order_form").forEach((function(t){o.a.render(r.a.createElement(Y,{attributes:JSON.parse(t.attributes["data-order-form-attr"].value)}),t)}))}},[[193,1,2]]]);
//# sourceMappingURL=main.5722b55e.chunk.js.map