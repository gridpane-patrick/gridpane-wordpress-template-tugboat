!function(l){var i={dom:{inventoryMultiStockManagement:l("#inventory_product_data .yith-pos-stock-management"),manageStock:l("#_manage_stock")},init:function(){l(document).on("click",".clone-stock-group",i.addOption),l(document).on("click",".yith-pos-group .yith-icon-trash",i.deleteOption),i.dom.manageStock.on("change",i.handleGeneralMultiStockVisibility),i.handleGeneralMultiStockVisibility(),l(document).on("change",".yith-pos-product-multistock-enabled",i.handleMultiStockOptionsVisibility),l(document).on("woocommerce_variations_loaded","#woocommerce-product-data",i.initAllMultiStockOptionsVisibility),i.initAllMultiStockOptionsVisibility(),i.initAll(),l(document).on("change",".variable_manage_stock",i.initAll)},initAll:function(){l(".yith-pos-product-multi-stock").each(function(){var t=l(this);t.find(".yith-pos-group").length||t.find(".clone-stock-group").click()})},addOption:function(t){t.preventDefault();var i=l(this),o=i.data("loop"),n=i.closest(".yith-pos-product-multi-stock").find(".yith-pos-multistock-options"),e=wp.template("yith-pos-stock-manager"+o),c=n.find(".yith-pos-group").length;n.append(e({id:c,loop:o})),l(document.body).trigger("wc-enhanced-select-init")},deleteOption:function(t){t.preventDefault();var i=l(this).closest(".yith-pos-group"),o=i.closest(".yith-pos-multistock-options");i.remove(),o.find(".yith-pos-group").length||o.closest(".yith-pos-product-multi-stock").find(".clone-stock-group").first().click()},handleGeneralMultiStockVisibility:function(){var t=i.dom.manageStock.is(":checked");i.dom.inventoryMultiStockManagement.fadeTo(.5,t,function(){t?l(this).show():l(this).hide()})},handleMultiStockOptionsVisibility:function(){var t=l(this),i=t.find("input"),o=t.closest(".yith-pos-stock-management").find(".yith-pos-product-multi-stock");"yes"===i.val()?o.show():o.hide()},initAllMultiStockOptionsVisibility:function(){l(".yith-pos-product-multistock-enabled").each(i.handleMultiStockOptionsVisibility)}};i.init()}(jQuery);