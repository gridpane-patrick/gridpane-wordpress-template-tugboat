jQuery(function(t){var e=t("#yith-wcgpf-type-template").text(),a=(t("#yith-wcgpf-feed-type").val(),t("#yith-wcgpf-merchant").val(),t("input#yith-wcgpf-check-template:checked").length);t("#yith-div-make-feed").data("yithpost");function i(e){var a=t("#yith-wcgpf-select-template").val(),i=t("#yith-wcgpf-merchant").val(),c=t("#yith-div-make-feed").data("yithpost");e?(t(".yith-wcgpf-template-feed").show(),n(a,i,c,e)):(t(".yith-wcgpf-template-feed").hide(),n(a,i,c,e))}function c(a){if(a){t("#yith-wcgpf-type-custom").hide();var i=t("#yith-wcgpf-select-template option:selected").text();t("#yith-wcgpf-type-template").text(e+i),t("#yith-wcgpf-type-template").show()}else t("#yith-wcgpf-type-template").hide(),t("#yith-wcgpf-type-custom").show()}function n(e,a,i,n){c(n);var p={template_id:e,merchant:a,data_post:i,show_templates:n,action:"yith_wcgpf_load_merchant_options"};t.ajax({type:"POST",data:p,url:yith_wcgpf_adminjs.ajaxurl,success:function(e){t("#yith-wcgpf-template-create-feed").empty(),t("#yith-wcgpf-template-create-feed").append(e)},complete:function(){}})}i(a),t(document).on("change","#yith-wcgpf-check-template",function(){i(t("input#yith-wcgpf-check-template:checked").length)}),t(document).on("change","#yith-wcgpf-select-template",function(){var e=t(this).val();t("#yith-wcgpf-template-create-feed").empty(),n(e,t("#yith-wcgpf-merchant").val(),t("#yith-div-make-feed").data("yithpost"),t("input#yith-wcgpf-check-template:checked").length)}),t(document).on("click","#yith-wcgpf-add-new-row",function(){var e=t("#yith-wcgpf-template-table tbody tr:first").clone();t(e).appendTo("#yith-wcgpf-template-table tbody"),t(e).find("input:not('.button')").val(""),t("#yith-wcgpf-check-template").prop("checked")&&(t("#yith-wcgpf-check-template").prop("checked",!1),t(".yith-wcgpf-template-feed").hide(),c(!1))}),t(document).on("click",".yith-wcgpf-delete",function(e){if(t(".yith_wcgpf_template_table  >tbody >tr").length>1){var a=t(e.target).closest("tr");t(a).remove()}}),t(".yith_wcgpf_template_table_thead_tbody").sortable();var p=function(e){var a=[];return e&&t.each(e,function(t,e){a.push({id:t,text:e})}),{results:a}},h=function(e,a){var i=t.parseJSON(e.attr("data-selected")),c=[];return t(e.val().split(",")).each(function(t,e){c.push({id:e,text:i[e]})}),a(c)},l=function(t){return'<div class="selected-option" data-id="'+t.id+'">'+t.text+"</div>"};t(":input.yith-wcgpf-category-search").filter(":not(.enhanced)").each(function(){var e={url:yith_wcgpf_adminjs.ajaxurl,dataType:"json",quietMillis:250,data:function(t){return{term:t,action:"yith_wcgpf_category_search",security:yith_wcgpf_adminjs.search_categories_nonce}},cache:!0};yith_wcgpf_adminjs.before_3_0?e.results=p:e.processResults=p;var a={initSelection:yith_wcgpf_adminjs.before_3_0?h:null,formatSelection:yith_wcgpf_adminjs.before_3_0?l:null,multiple:t(this).data("multiple"),allowClear:!!t(this).data("allow_clear"),placeholder:t(this).data("placeholder"),minimumInputLength:t(this).data("minimum_input_length")?t(this).data("minimum_input_length"):"3",escapeMarkup:function(t){return t},ajax:e};t(this).select2(a).addClass("enhanced").on("change",function(){})}),t(":input.yith-wcgpf-tags-search").filter(":not(.enhanced)").each(function(){var e={url:yith_wcgpf_adminjs.ajaxurl,dataType:"json",quietMillis:250,data:function(t){return{term:t,action:"yith_wcgpf_tag_search",security:yith_wcgpf_adminjs.search_tags_nonce}},cache:!0};yith_wcgpf_adminjs.before_3_0?e.results=p:e.processResults=p;var a={initSelection:yith_wcgpf_adminjs.before_3_0?h:null,formatSelection:yith_wcgpf_adminjs.before_3_0?l:null,multiple:t(this).data("multiple"),allowClear:!!t(this).data("allow_clear"),placeholder:t(this).data("placeholder"),minimumInputLength:t(this).data("minimum_input_length")?t(this).data("minimum_input_length"):"3",escapeMarkup:function(t){return t},ajax:e};t(this).select2(a).addClass("enhanced").on("change",function(){}),t(document.body).trigger("wc-enhanced-select-init")})});